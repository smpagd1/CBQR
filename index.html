<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>강동경찰서 메뉴</title>
  <style>
    :root {
      --primary: #003B4F;
      --secondary: #002B3F;
      --accent: #FFFFFF;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
    body { background: var(--primary); color: var(--accent); font-family: Arial, sans-serif; min-height: 100vh; }
    .site-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      background: var(--secondary);
      padding: 16px;
      border-bottom: 2px solid var(--accent);
    }
    .site-title { font-size: 3.5rem; font-weight: 700; }
    .logo { height: 40px; }

    /* Desktop */
    .main-menu,
    .submenu-container,
    .nav-footer {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 5cm;
    }
    .main-menu button { padding: 20px 40px; font-size: 32px; border-radius: 16px; }
    .sub-btn { padding: 16px 32px; font-size: 28px; border-radius: 12px; }
    .nav-footer button {
      padding: 20px 40px;
      font-size: 32px;
      border-radius: 16px;
      border: none;
      background: var(--secondary);
    }

    /* Mobile */
    @media screen and (max-width: 768px) {
      .site-title { font-size: 2rem; }
      .main-menu,
      .submenu-container,
      .nav-footer {
        flex-direction: column;
        align-items: center;
        margin-top: 2cm;
      }
      .main-menu button,
      .sub-btn,
      .nav-footer button {
        width: 80%;
        max-width: 300px;
        margin: .5rem 0;
      }
      .main-menu button { padding: 16px; font-size: 24px; }
      .sub-btn { padding: 12px; font-size: 20px; }
      .nav-footer button { padding: 16px; font-size: 24px; }
    }

    button {
      background: transparent;
      border: 2px solid var(--accent);
      color: var(--accent);
      cursor: pointer;
      transition: background .3s, opacity .3s;
    }
    button:hover { background: var(--accent); color: var(--primary); }
    .hidden { display: none; }
    .content-container { padding: 16px; text-align: center; }
  </style>
</head>
<body>
  <header class="site-header">
    <img src="logo.png" alt="로고" class="logo" />
    <h1 class="site-title">강동경찰서</h1>
  </header>

  <nav class="main-menu" id="mainMenu">
    <button data-key="car">🚗 차량</button>
    <button data-key="computer">💻 전산장비</button>
    <button data-key="phone">📞 유무선</button>
    <button data-key="secure">🔐 보안</button>
    <button data-key="goods">📦 일반물품</button>
  </nav>

  <section class="submenu-container hidden" id="submenuContainer"></section>
  <section class="content-container" id="contentContainer"></section>
  <footer class="nav-footer hidden" id="navFooter">
    <button id="backBtn">🔙 이전</button>
    <button id="homeBtn">🏠 홈으로</button>
  </footer>

  <script>
    // 1. 메뉴 데이터
    const menuData = {
      car: ['고장 났어요','사고 났어요','담당자'],
      computer: ['고장났어요','소프트웨어','담당자'],
      phone: ['경비전화 고장','업무용 폰 고장','내부망 고장'],
      secure: ['개인정보 유출','보안 프로그램 미설치','보안 규정 문의'],
      goods: ['새 토너 필요','A4 용지 필요','기타 물품 필요']
    };

    // 2. 중첩 메뉴 데이터
    const subMenuData = {
      '고장 났어요': ['타이어 펑크','연료 부족','배터리 방전'],
      '사고 났어요': ['견인이 필요해요','보험회사 연락처','담당자'],
      '소프트웨어': ['MS오피스(엑셀)','한컴','기타']
    };

    // 3. 최하위 버튼별 설명 HTML 템플릿
    const contentData = {
      '타이어 펑크': `
        <h2>타이어 펑크 대처 안내</h2>
        <p>경찰서에서는 직접 견인을 지원하지 않습니다. 주변 견인업체 연락처:</p>
        <ul>
          <li>AAA 견인: 123-4567</li>
          <li>BBB 긴급출동: 765-4321</li>
        </ul>
      `,
      'MS오피스(엑셀)': `
        <h2>Microsoft Excel 핵심 기능</h2>
        <p>내부망 엑셀이 필요하시면 담당자에게 요청 바랍니다.</p>
        <ol>
          <li>담당자 : </li>
          <li>경비번호 : </li>
          <li>담당부서 : 정보화장비계</li>
        </ol>
      `,
      // ...원하는 만큼 추가하세요
    };

    // 4. 상태 스택 및 요소 참조
    let historyStack = [];
    const mainMenuEl = document.getElementById('mainMenu');
    const submenuEl = document.getElementById('submenuContainer');
    const contentEl = document.getElementById('contentContainer');
    const navFooter = document.getElementById('navFooter');
    const backBtn = document.getElementById('backBtn');
    const homeBtn = document.getElementById('homeBtn');

    // 초기 상태: 메인 메뉴 보여주기
    showMain();

    // 메인 메뉴 클릭
    mainMenuEl.addEventListener('click', e => {
      if (e.target.tagName === 'BUTTON') {
        const key = e.target.dataset.key;
        historyStack = [{ view: 'main' }, { view: 'sub', key }];
        showSubMenu(key);
      }
    });

    // 서브 또는 중첩 메뉴 클릭
    submenuEl.addEventListener('click', e => {
      if (e.target.tagName === 'BUTTON') {
        const text = e.target.textContent;
        const last = historyStack[historyStack.length - 1];
        if (last.view === 'sub') {
          historyStack.push({ view: 'nested', sub: text, parent: last.key });
          if (subMenuData[text]) showNested(text);
          else showContent(text);
        } else if (last.view === 'nested') {
          historyStack.push({ view: 'content', item: text });
          showContent(text);
        }
      }
    });

    // 이전 / 홈 버튼
    backBtn.addEventListener('click', goBack);
    homeBtn.addEventListener('click', goHome);

    // 화면 전환 함수들
    function showMain() {
      mainMenuEl.classList.remove('hidden');
      submenuEl.classList.add('hidden');
      contentEl.innerHTML = '';
      navFooter.classList.add('hidden');
    }
    function showSubMenu(key) {
      mainMenuEl.classList.add('hidden');
      submenuEl.innerHTML = menuData[key]
        .map(item => `<button class="sub-btn">${item}</button>`)
        .join('');
      submenuEl.classList.remove('hidden');
      contentEl.innerHTML = '';
      navFooter.classList.remove('hidden');
    }
    function showNested(sub) {
      submenuEl.innerHTML = subMenuData[sub]
        .map(item => `<button class="sub-btn">${item}</button>`)
        .join('');
      submenuEl.classList.remove('hidden');
      contentEl.innerHTML = '';
      navFooter.classList.remove('hidden');
    }
    function showContent(item) {
      mainMenuEl.classList.add('hidden');
      submenuEl.classList.add('hidden');
      // 커스텀 템플릿 적용, 없으면 기본 포맷
      contentEl.innerHTML = contentData[item] || `
        <h2>${item}</h2>
        <p>'${item}'에 대한 기본 설명입니다.</p>
      `;
      navFooter.classList.remove('hidden');
    }

    // 이전으로
    function goBack() {
      if (historyStack.length <= 1) return showMain();
      historyStack.pop(); // 현재 화면 제거
      const prev = historyStack[historyStack.length - 1];
      switch (prev.view) {
        case 'main':  showMain();              break;
        case 'sub':   showSubMenu(prev.key);   break;
        case 'nested':showNested(prev.sub);    break;
      }
    }
    // 홈으로
    function goHome() {
      historyStack = [];
      showMain();
    }
  </script>
</body>
</html>
